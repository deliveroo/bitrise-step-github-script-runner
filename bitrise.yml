format_version: 4
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

app:
  envs:
  # If you want to share this step into a StepLib
  - BITRISE_STEP_ID: github-script-runner
  - BITRISE_STEP_VERSION: "0.0.1"
  - BITRISE_STEP_GIT_CLONE_URL: https://github.com/deliveroo/bitrise-step-github-script-runner.git

workflows:
  cli-test:
    steps:
    - path::./:
        title: Step CLI Test
        description: Use it to test this step locally with bitrise CLI
        run_if: true
        inputs: # RPE-1055: replace them ./test-script.sh before merging
        - repository: deliveroo/mobile-scripts
        - script_path: promon/promon-upload-file.sh
        - branch: eugenio/RPE-972/promon-shield-upload-app
        - command_line_arguments: --local-file-path "$BITRISE_SOURCE_DIR/README.md" --remote-folder-path "deliveroo/Upload/rider" --tmp-folder-path "$BITRISE_SOURCE_DIR/tmp"
        - tmp_folder: "$BITRISE_SOURCE_DIR/tmp"
        - github_token: $GITHUB_TOKEN
  github-test:
    steps:
    - git::https://github.com/deliveroo/bitrise-step-github-script-runner.git@eugenio/RPE-1055/bitrise-step-github-script-runner: # RPE-1055: remove the branch before merging into master
        title: Step Bitrise Test
        description: Use it to test this step directly in Bitrise
        run_if: true
        inputs: # RPE-1055: replace them ./test-script.sh before merging
        - repository: deliveroo/mobile-scripts
        - script_path: promon/promon-upload-file.sh
        - branch: eugenio/RPE-972/promon-shield-upload-app
        - command_line_arguments: --local-file-path "$BITRISE_SOURCE_DIR/README.md" --remote-folder-path "deliveroo/Upload/rider" --tmp-folder-path "$BITRISE_SOURCE_DIR/tmp"
        - tmp_folder: "$BITRISE_SOURCE_DIR/tmp"
        - github_token: $GITHUB_TOKEN